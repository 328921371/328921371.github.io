---
title: ECMAScript 6 数组的扩展
categories:
  - ECMAScript 6
tags:
  - ECMAScript 6
copyright: true
comments: true
abbrlink: 1a6684f2
date: 2018-12-26 16:39:05
---

<hr style='filter:progid:DXImageTransform.Microsoft.Glow(color=#FF0000,strength=10)' color='#FF0000' size='1' />

> 数组是每天都要接触的东西,ES6添加的语法更是方便了许多,主要的运算符扩展我已经单独分一章了,接下来聊聊数组的其他语法糖

<!--more-->

文章主要参考阮一峰老师的 ECMAScript 6入门,站在巨人的肩膀上看世界...

## 数组转化

### Array.from

> Array.from方法用于将类对象转为真正的数组,所谓类似数组的对象，本质特征只有一点，即必须有length属性。因此，任何有length属性的对象，都可以通过Array.from方法转为数组

```
  let  json = {
    '0': 'a',
    '1': 'b',
    '2': 'c',
    length: 3
  }
  // 转化为arr
  let arr = Array.from(json);
```

Array.from还可以接受第二个参数，作用类似于数组的map方法，用来对每个元素进行处理，将处理后的值放入返回的数组。

```
  Array.from([1, 2, 3], (x) => x * x)
  // [1, 4, 9]

  Array.from([1, , 2, , 3], (n) => n || 0)
  // [1, 0, 2, 0, 3]
```

### Array.of()

> Array.of方法用于将一组值，转换为数组。

```
  Array.of(3, 11, 8) // [3,11,8]
  Array.of(3) // [3]
  Array.of(3).length // 1
```

## 数组查找

> 数组实例的find方法，用于找出第一个符合条件的数组成员。它的参数是一个回调函数，所有数组成员依次执行该回调函数，直到找出第一个返回值为true的成员，然后返回该成员。如果没有符合条件的成员，则返回undefined。

```
  [1, 5, 10, 15].find(function(value, index, arr) {
    return value > 9;
  }) // 10
```

## 数组填充

> fill方法使用给定值，填充一个数组。

```

  // fill方法从 1 号位开始，向原数组填充 7，到 2 号位之前结束。
  ['a', 'b', 'c'].fill(7, 1, 2)
  //['a', 7, 'c']
```

## 数组实例的 entries()，keys() 和 values()

ES6 提供三个新的方法——entries()，keys()和values()——用于遍历数组。它们都返回一个遍历器对象，可以用for...of循环进行遍历，唯一的区别是keys()是对键名的遍历、values()是对键值的遍历，entries()是对键值对的遍历。

```

  let ary = ['a', 'b']

  for (let index of ary.keys()) {
    console.log(index);
    // 0
    // 1
  }

  for (let elem of ary.values()) {
    console.log(elem);
    // 'a'
    // 'b'
  }

  for (let [index, elem] of ary.entries()) {
    console.log(index, elem);
    // 0 "a"
    // 1 "b"
  }

```

> entries()实例方式生成的是Iterator形式的数组，那这种形式的好处就是可以让我们在需要时用next()手动跳转到下一个值。举一个例子

```
  let letter = ['a', 'b', 'c'];
  let entries = letter.entries();
  console.log(entries.next().value); // [0, 'a']
  console.log(entries.next().value); // [1, 'b']
  console.log(entries.next().value); // [2, 'c']
```

## 数组实例的 includes()----包含

> Array.prototype.includes方法返回一个布尔值，表示某个数组是否包含给定的值，与字符串的includes方法类似。

```
  [1, 2, 3].includes(2) // true
  [1, 2, 3].includes(4) // false
```

> 该方法的第二个参数表示搜索的起始位置，默认为0。如果第二个参数为负数，则表示倒数的位置，如果这时它大于数组长度（比如第二个参数为-4，但数组长度为3），则会重置为从0开始。

```
  [1, 2, 3].includes(3, 3);  // false
  [1, 2, 3].includes(3, -1); // true
```

## 数组实例的 flat()，flatMap()

> 数组的成员有时还是数组，Array.prototype.flat()用于将嵌套的数组“拉平”，变成一维的数组。该方法返回一个新数组，对原数据没有影响。flat()默认只会“拉平”一层，如果想要“拉平”多层的嵌套数组，可以将flat()方法的参数写成一个整数，表示想要拉平的层数，默认为1。

```
  [1, 2, [3, [4, 5]]].flat()
  // [1, 2, 3, [4, 5]]

  [1, 2, [3, [4, 5]]].flat(2)
  // [1, 2, 3, 4, 5]

  // 如果不管有多少层嵌套，都要转成一维数组，可以用Infinity关键字作为参数。
  [1, [2, [3]]].flat(Infinity)
  // [1, 2, 3]

  // 如果原数组有空位，flat()方法会跳过空位。
  [1, 2, , 4, 5].flat()
  // [1, 2, 4, 5]
```

### 数组空位

> 由于空位的处理规则非常不统一，所以建议避免出现空位。

ES5 对空位的处理，已经很不一致了，大多数情况下会忽略空位。

* forEach(), filter(), reduce(), every() 和some()都会跳过空位。
* map()会跳过空位，但会保留这个值
* join()和toString()会将空位视为undefined，而undefined和null会被处理成空字符串。

> ES6 则是明确将空位转为undefined。

以上就是我对ECMAScript 6数组扩展的一些理解，如果文章由于我学识浅薄，导致您发现有严重谬误的地方，请一定在评论中指出，我会在第一时间修正我的博文，以避免误人子弟。